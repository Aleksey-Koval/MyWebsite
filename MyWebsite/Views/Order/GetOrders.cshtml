@model IEnumerable<MyWebsite.Models.ViewModel.OrderViewModel>
@using Microsoft.AspNet.Identity

@{
    ViewBag.Title = "GetOrders";
}
<head>
    <style>

        td, th {
            height: 45px;
            padding: 0px;
            border: solid 1px black;
            text-align: center;
            vertical-align: middle;
        }
    </style>
</head>


@if (Model.Count() > 0)
{
    <h3>Ваши заказы</h3>
    <table class="table">
        <tr>
            <th style='vertical-align: middle ; border: solid 1px black'>
                @Html.DisplayNameFor(model => model.Id)
            </th>
            <th style='vertical-align: middle ; border: solid 1px black'>
                @Html.DisplayNameFor(model => model.Date)
            </th>
            <th style='vertical-align: middle ; border: solid 1px black'>
                @Html.DisplayNameFor(model => model.QuantityProducts)
            </th>
            <th style='vertical-align: middle ; border: solid 1px black'>
                @Html.DisplayNameFor(model => model.Sum)
            </th>
            <th style='vertical-align: middle ; border: solid 1px black'>
                @Html.DisplayNameFor(model => model.Orderstatus)
            </th>

            <th style='border:none'>
            </th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td style='padding:0px; vertical-align: middle'>
                    @Html.DisplayFor(modelItem => item.Id)
                </td>
                <td style='padding:0px; vertical-align: middle'>
                    @Html.DisplayFor(modelItem => item.Date)
                </td>
                <td style='padding:0px; vertical-align: middle'>
                    @foreach (var imege in item.ProductsForOrderViewModel)
                    {
                        @Html.Raw("<img style='width:60px; height:50px;' src=\"data:image/jpeg;base64,"
                                    + Convert.ToBase64String(imege.Image) + "\" />")
                    }
                </td>
                <td style='padding:0px; vertical-align: middle'>
                    @Html.DisplayFor(modelItem => item.Sum)
                </td>
                <td style='padding:0px; vertical-align: middle'>
                    @Html.DisplayFor(modelItem => item.Orderstatus)
                </td>
                <td style='padding:0px; vertical-align: middle; border:none'>
                    @using (Html.BeginForm("GetOrderDetails", "Order", FormMethod.Post))
                    {
                        @Html.Hidden("OrderId", item.Id)
                        <button type="submit" class="btn btn-primary btn-sm p-0 m-0">Подробно</button>
                    }
                </td>
            </tr>
        }
    </table>
}
else
{
    <h3>Вы еще ничего не покупали</h3>
}
